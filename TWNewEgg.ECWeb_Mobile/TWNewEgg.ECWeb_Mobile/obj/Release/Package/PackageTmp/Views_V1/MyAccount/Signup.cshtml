
@{
    ViewBag.Title = "註冊" + "-新蛋全球生活網";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section styleSheets {
    @Styles.Render("~/Themes/css/bootstrap.css")
    @Styles.Render("~/Themes/css/mStyle.css")
    @Styles.Render("~/Themes/css/font-awesome/css/font-awesome.css")
   
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
}

<div class="wrapper">
    <div class="main">
    @section addToHeader{
        @Html.Partial("_HeaderNoCart")
    }
        <div class="container">
            <form>
                    <br>
                    <h4>歡迎加入新蛋全球生活網</h4>
                        <div class="row show-grid">
                            <div class="col-xs-12">
                                <div class="form-group" id="emailTip">
                                    <div class="redtxt show-grid8">*</div>
                                    <input type="text" class="form-control"  name="Email" id="account_email" tabindex="1" placeholder="請輸入E-mail (新蛋帳號)" />
                                    <p class="help-block redtxt2" style="display:none" id="EmailRulesCheck">使用者帳號是必填欄位</p>
                                </div>
                                <div class="form-group input-group" id="pwdTip">
                                    <div class="redtxt show-grid8">*</div>
                                    <input type="password" class="form-control"  name="PWD" id="account_pwd" onkeyup="VerifyPwdRule(this.value,$('#account_email').val());"  maxlength="16" tabindex="2" onfocus="VerifyPwdRule(this.value,$('#account_email').val());" placeholder="6-16碼數字或英文字母混合" />
                                    <span class="input-group-btn">
                                    <div class="whitetxt show-grid8">*</div>
                                        <button class="btn btn-default bluebg whitetxt show-grid5" id="hide_pwd" type="button" style="display:none">隱藏密碼</button>
                                        <button class="btn btn-default bluebg whitetxt show-grid5" id="show_pwd" type="button">顯示密碼</button>
                                    </span>
                                </div>
                                <div>
                                    <div class="pswRuleBox" id="ShowPasswordRule" style="opacity: 0; height: 0px;">
                                        <div id="showResult" class="pswSecure" style="display:none"><p>密碼強度</p></div>
                                        <div>為保證您的個資安全，請確認您的密碼必須符合以下條件：</div>
                                            <div id="pwdcheck_email"><img src="/Themes/img/Account/unchecked.png" />帳密不得相同</div>
                                            <div id="pwdcheck_length"><img src="/Themes/img/Account/unchecked.png" />密碼長度為6~16字元</div>
                                            <!--li id="pwdcheck_numeric"><img src="/Themes/img/Account/unchecked.png" />需含有英文與數字</!--li-->
                                    </div>
                                        
                                        <div class="errMsg"><span id="password_rules" style="display:none" class="help-block redtxt2"></span></div>
                                </div>
                                <div class="form-group" id="rePwdTip">
                                    <div class="redtxt show-grid8">*</div>
                                    <input class="form-control" type="password" name="PWDtxt" id="account_confirmpassword" maxlength="16" tabindex="3" placeholder="請再次輸入密碼">
                                    <p class="help-block redtxt2" style="display: none" id="PassWordRuleSay">確認密碼與密碼不一致，請重新輸入。</p>
                                </div>
                                <!--div class="form-group" id="mobileTip">
                                    <div class="redtxt show-grid8">*</div>
                                    <input class="form-control" placeholder="請輸入手機號碼" type="tel" id="Mobile" name="Mobile" tabindex="4" maxlength="10">
                                    <p class="help-block redtxt2" id="PhoneRule" style="display: none">手機格式錯誤</p>
                                </div-->
                            </div>
                        </div>
                        <div class="row show-grid">
                            <div class="col-xs-12">
                                <!--span class="redtxt">*</!--span-->
                                <div class="recaptcha">
                                    <div id="googlecaptcha"></div>
                                    <input type="hidden" id="gcap" name="gcap" value=""/>
                                </div>
                            </div>
                        </div>
                        <!--div class="row show-grid2">
                            <div class="col-xs-4">
                                <div class="form-group">
                                    <select class="form-control" id="titleSandM" onchange="SexSelect()">
                                        <option value="@((int)TWNewEgg.Models.ViewModels.Account.MemberVM.SetSex.Male)" selected>先生</option>
                                        <option value="@((int)TWNewEgg.Models.ViewModels.Account.MemberVM.SetSex.Female)">小姐</option>
                                    </select>
                                    <input type="text" name="Sex" id="Sex" style="display: none" />
                                </div>
                            </div>
                            <div class="col-xs-4">
                                <div class="form-group">
                                    <input class="form-control" placeholder="姓氏" id="RegisterLastName" tabindex="4" autocomplete="off" onkeyup="GetLastNameLength()" maxlength="35"  onchange="GetName()">
                                </div>
                            </div>
                            <div class="col-xs-4">
                                <div class="form-group">
                                    <input class="form-control" placeholder="名字" id="Nickname" name="Nickname" tabindex="4" autocomplete="off" maxlength="40" onkeyup="GetNickNameLength()" onchange="GetName()">
                                </div>
                            </div>
                        </div-->
                        <!--div class="form-group">
                            <input type="text" id="Birthday" name="Birthday" class="form-control" tabindex="4" maxlength="10" placeholder="請選擇生日(年/月/日)" />
                            <span id="BirthDayRule" style="display: none"></span>
                        </div-->
                        <br>
                        <br>
                        <div class="row show-grid">
                            <div class="col-xs-12">
                                <input type="hidden" id="googlecaptchaM" name="googlecaptchaM" value=""/>
                                <button type="submit" id="submitdata" name="submitdata" class="btn btn-lg btn-block orangebg2 whitetxt">加入會員</button>
                                <p class="help-block" style="text-align:center"><!--input type="checkbox" name="AgreePaper" id="account_agreepaper" tabindex="5" /-->我同意接受<a href="/Policies/Member">會員服務條款</a>和<a href="/Policies/Privacy">隱私權政策</a></p>
                            </div>
                        </div>
            </form>
        </div>
    </div><!-- /.main -->
</div><!-- /.wrapper -->

@section scripts{
<script src="/Scripts/jquery.js"></script>
<script src="/Scripts/bootstrap.js"></script>
<script src="/Scripts/jquery.freetile.js"></script>
<script src="/Scripts/init.js"></script>
<script src="/Scripts/owl.carousel.js"></script>
<script src="/Scripts/royal_tab.js"></script>
<script>
    $(document).ready(function () {
        $("#owl-demo").owlCarousel({

            navigation: true,
            slideSpeed: 300,
            paginationSpeed: 400,
            singleItem: true

            // "singleItem:true" is a shortcut for:
            // items : 1, 
            // itemsDesktop : false,
            // itemsDesktopSmall : false,
            // itemsTablet: false,
            // itemsMobile : false

        });
    });
</script>
    @Scripts.Render("~/Scripts/NETW/netw-home-1.0.0.0.js")
    @Scripts.Render("~/Scripts/NETW/netw-itemImageEffect-1.0.0.0.js")
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/Scripts/TWEC/AccountVerify.js")
    
    <script src="https://www.google.com/recaptcha/api.js?hl=zh-TW&render=explicit" async defer></script>
    <script type="text/javascript" src="/Scripts/NETW/netw-grcaptcha-1.0.0.js" async defer></script>
    <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
    <script type="text/javascript">
        /*顯示或隱藏密碼字元*/
        showPassword();

        var emailRule = /^([\w-\.\+\-\_]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4})$/;
        var pwRule = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^0-9a-zA-Z])(?=.{8,12})(?!.*[^\x21-\x7e]).*$/;
        $(document).ready(function () {
            if (getCookies("ValidateCode") != null) {
            }
            else {
                $("#valiCode").removeAttr("src");
                $("#valiCode").attr("src", "");
                $("#valiCode").attr("src", "/MyAccount/GetValidateCode");
            }
            if ($("#account_messagepaper:checked").length == 1) {
                $("#account_messagepaper").val(1);
            }
            else {
                $("#account_messagepaper").val(0);
            }
            var Register_Status = '@ViewBag.Register_Status';
            if (Register_Status != "") {
                alert(Register_Status);
            }
            var Message = '@ViewBag.Message';
            if (Message != "") {
                alert(Message);
            }

            var ActivityFlag = '@ViewBag.ActivityFlag'.toLowerCase();
            var ActivityMessage = '@ViewBag.ActivityMessage';
            if (ActivityFlag == "false" && ActivityMessage != "") {
                alert(ActivityMessage);
            }
        });
        //$("#account_agreepaper").bind("click", function () {
        //    if ($("#account_agreepaper:checked").length == 1) {
        //        $("#submitdata").attr('disabled', false);
        //        $("#account_agreepaper").val(1);
        //        $("#submitdata").removeClass("gray");
        //    }
        //    else {
        //        $("#account_agreepaper").val(0);
        //        $("#submitdata").attr('disabled', true);
        //        $("#submitdata").addClass("gray");
        //    }
        //});

        $("#show_pwd").click(function () {
            $("#account_pwd").attr('type', 'text');
            $("#show_pwd").css('display', 'none');
            $("#hide_pwd").css('display', 'block');
        });
        $("#hide_pwd").click(function () {
            $("#account_pwd").attr('type', 'password');
            $("#show_pwd").css('display', 'block');
            $("#hide_pwd").css('display', 'none');
        });

        @*檢查帳號是否符合要求格式*@
        $("#account_email").blur(function () {
            var EmailAccount = $("#account_email").val();
            if (!EmailAccount.match(emailRule) && EmailAccount != "" && EmailAccount != null) {
                $("#EmailRulesCheck").text("請輸入正確的帳號格式");
                $("#EmailRulesCheck").css('display', '');
                $("#emailTip").attr('class', 'has-error');
            }
            else if (EmailAccount == "" || EmailAccount == null) {
                $("#EmailRulesCheck").text("使用者帳號是必填欄位");
                $("#EmailRulesCheck").css('display', '');
                $("#emailTip").attr('class', 'has-error');
            }
            else if (EmailAccount.match(emailRule)) {
                $("#EmailRulesCheck").css('display', 'none');
                $("#emailTip").attr('class', 'form-group');
            }
        });
        @*檢查密碼是否符合要求格式*@
        $("#account_pwd").blur(function () {
            var password = $("#account_pwd").val();
            var EmailAccount = $("#account_email").val();
            if (password.length < 6 && password != "" && password != null) {
                $("#password_rules").text("");
                $("#password_rules").text("密碼長度不可小於六碼");
                $("#password_rules").css('display', '');
                $("#pwdTip").attr('class', 'form-group input-group has-error');
            }
            else if (!VerifyPwdRule(password, EmailAccount) && password != "" && password != null) {
                $("#password_rules").text("");
                $("#password_rules").text("密碼格式錯誤");
                $("#password_rules").css('display', '');
                $("#pwdTip").attr('class', 'form-group input-group has-error');
            }
            else if (password == "" || password == null) {
                $("#password_rules").text("");
                $("#password_rules").text("請輸入密碼");
                $("#password_rules").css('display', '');
                $("#pwdTip").attr('class', 'form-group input-group has-error');
            }
            else if (VerifyPwdRule(password, EmailAccount)) {                
                $("#password_rules").text("");
                $("#password_rules").text("帳密不得相同");
                $("#password_rules").css('display', 'none');
                $("#pwdTip").attr('class', 'form-group input-group');
            }

        });
        @*檢查密碼與確認密碼是否相同*@
        $("#account_confirmpassword").blur(function () {
            var password = $("#account_pwd").val();
            var account_confirmpassword = $("#account_confirmpassword").val();
            if (password != account_confirmpassword && account_confirmpassword != "" && account_confirmpassword != null) {
                $("#PassWordRuleSay").css('display', '');
                $("#rePwdTip").attr('class', 'form-group has-error');
            }
            else if (password == account_confirmpassword) {
                $("#PassWordRuleSay").css('display', 'none');
                $("#rePwdTip").attr('class', 'form-group');
            }
            else if (account_confirmpassword == "" || account_confirmpassword == null) {
                $("#PassWordRuleSay").css('display', 'none');
                $("#rePwdTip").attr('class', 'form-group');
            }
        });


        var verifyCallback = function (reponse) {
            $("#gcap").val(reponse);
        };
        $(window).load(function () {
            initGreCaptcha('googlecaptcha', verifyCallback, 'light', 'image');
        });

        @*檢查生日是否符合格式*@
        //$("#Birthday").blur(function () {
        //    var Birthday = $("#Birthday").val();
        //    if (!Birthday.match(/^\d{4}\/\d{2}\/\d{2}$/) && Birthday != "" && Birthday != null) {
        //        $("#BirthDayRule").text("生日格式錯誤");
        //        $("#BirthDayRule").css('display', '');
        //    }
        //    else if (Birthday == "" || Birthday == null) {
        //        $("#BirthDayRule").text("");
        //        $("#BirthDayRule").css('display', 'none');
        //    }
        //    else if (Birthday.match(/^\d{4}\/\d{2}\/\d{2}$/) && Birthday != "" && Birthday != null) {
        //        $("#BirthDayRule").text("");
        //        $("#BirthDayRule").css('display', 'none');
        //        var today = new Date();
        //        if (parseInt(Birthday.substring(0, 4), 10) > today.getFullYear()) {
        //            $("#BirthDayRule").text("尚未出生,年份錯誤");
        //            $("#BirthDayRule").css('display', '');
        //        } else {
        //            if (parseInt(Birthday.substring(0, 4), 10) == today.getFullYear() && parseInt(Birthday.substring(5, 7), 10) > today.getMonth() + 1) {
        //                $("#BirthDayRule").text("尚未出生,月份錯誤");
        //                $("#BirthDayRule").css('display', '');
        //            } else {
        //                if (parseInt(Birthday.substring(0, 4), 10) == today.getFullYear() && parseInt(Birthday.substring(5, 7), 10) == today.getMonth() + 1 && parseInt(Birthday.substring(8, 10), 10) > today.getDate()) {
        //                    $("#BirthDayRule").text("尚未出生,日期錯誤");
        //                    $("#BirthDayRule").css('display', '');

        //                } else {
        //                    $("#BirthDayRule").text("");
        //                    $("#BirthDayRule").css('display', 'none');
        //                }
        //            }
        //        }
        //    }
        //});
        @*檢查手機格式是否正確*@
        //$("#Mobile").blur(function () {
        //    var Phone = $("#Mobile").val();
        //    //PhoneRule
        //    if (!Phone.match(/^09[0-9]{8}$/) && Phone != "" && Phone != null) {
        //        $("#mobileTip").attr('class', 'form-group has-error');
        //        $("#PhoneRule").text("手機格式錯誤");
        //        $("#PhoneRule").css('display', '');
        //    }
        //    else if (Phone == "" || Phone == null) {
        //        $("#mobileTip").attr('class', 'form-group has-error');
        //        $("#PhoneRule").text("");
        //        $("#PhoneRule").css('display', 'none');
        //    }
        //    else if (Phone.match(/^09[0-9]{8}$/) && Phone != "" && Phone != null) {
        //        $("#mobileTip").attr('class', 'form-group');
        //        $("#PhoneRule").text("");
        //        $("#PhoneRule").css('display', 'none');
        //    }
        //});

        @*DateTimePicker*@
        //$(function () {
        //    var d = new Date();
        //    var Year = d.getUTCFullYear();
        //    var YearRange = String("1900:" + Year);
        //    $("#Birthday").datepicker({
        //        changeMonth: true,
        //        changeYear: true,
        //        dateFormat: 'yy/mm/dd',
        //        yearRange: YearRange,
        //        maxDate: "+0d",  //可选最大日期
        //        closeTextType: "close" //关闭按钮文字
        //    });
        //});
        @*取得cookie*@
        function getCookies(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }
        @*重新產生驗證碼*@
        $("#Refresh").bind("click", function () {
            $("#valicoderules").removeAttr("style");
            document.getElementById("valicoderules").innerHTML = "";
            str = "/MyAccount/GetValidateCode?time=" + (new Date()).getTime();
            $("#valiCode").attr("src", str);
        });

        @*賦予性別值*@
        //function SexSelect() {
        //    var sexVaule = $("#titleSandM").val();
        //    $("#Sex").val(sexVaule);
        //}
        @*Get name*@
        //function GetName() {
        //    var name = $("#RegisterLastName").val() + $("#Nickname").val();
        //    $("#Name").val(name);
        //}
        @*判斷全形文字*@

        //function GetLastNameLength() {
        //    $("#RegisterLastName").attr('maxlength', '35');
        //    var lastNameArrMaxi = $("#RegisterLastName").val().match(/[^\x00-\xff]/g);
        //    var lastNameMaxi;
        //    if (lastNameArrMaxi == "" || lastNameArrMaxi == null) {
        //        lastNameMaxi = 0;
        //    } else {
        //        lastNameMaxi = lastNameArrMaxi.length;
        //    }

        //    if (lastNameMaxi >= 10) {
        //        $("#RegisterLastName").attr('maxlength', '10');
        //    }

        //}

        //function GetNickNameLength() {
        //    $("#Nickname").attr('maxlength', '40');
        //    var nickNameArrMaxi = $("#Nickname").val().match(/[^\x00-\xff]/g);
        //    var nickNameMaxi;
        //    if (nickNameArrMaxi == "" || nickNameArrMaxi == null) {
        //        nickNameMaxi = 0;
        //    } else {
        //        nickNameMaxi = nickNameArrMaxi.length;
        //    }

        //    if (nickNameMaxi >= 13) {
        //        $("#Nickname").attr('maxlength', '13');
        //    }
        //}

        @*檢查所有限制條件*@
        function CheckAllStatus() {
            var EmailAccount = $("#account_email").val();
            var password = $("#account_pwd").val();
            var account_confirmpassword = $("#account_confirmpassword").val();
            var titleSandM = $("#titleSandM").val();
            //var RegisterLastName = $("#RegisterLastName").val();
            //var Nickname = $("#Nickname").val();
            //var Birthday = $("#Birthday").val();
            //var Phone = $("#Mobile").val();
            var account_agreepaper = $("#account_agreepaper:checked").length;

            @*檢查帳號*@
            if (EmailAccount == "" || EmailAccount == null) {
                $("#EmailRulesCheck").text("請輸入帳號");
                $("#EmailRulesCheck").css('display', '');
                $("#emailTip").attr('class', 'form-group has-error');
                return false;
            }
            else if (!EmailAccount.match(emailRule)) {
                $("#EmailRulesCheck").text("請輸入正確的帳號格式");
                $("#EmailRulesCheck").css('display', '');
                $("#emailTip").attr('class', 'form-group has-error');
                return false;
            }
            @*檢查密碼所有規格限制*@
            if (password == "" || password == null) {
                //$("#ShowPasswordRule").text("請輸入密碼");
                //$("#ShowPasswordRule").css('display', '');
                //$("#pwdTip").attr('class', 'form-group input-group has-error');
                alert("請輸入密碼");
                return false;
            }
            else if (!VerifyPwdRule(password, EmailAccount)) {
                alert("請輸入正確的密碼格式");
                return false;
            }
            else if (password.length < 6) {
                alert("密碼長度不符合6~16碼");
                return false;
            }
            else if (account_confirmpassword == "" || account_confirmpassword == null) {
                alert("請輸入\"確認密碼\"");
                return false;
            }
            else if (password != account_confirmpassword) {
                alert("密碼與確認密碼不相同");
                return false;
            }

            @*請查稱謂、姓、名字*@
            /*
            if (titleSandM == -1) {
                alert("請選擇稱謂");
                return false;
            }
            else if (RegisterLastName == null || RegisterLastName == "") {
                alert("請輸入姓氏");
                return false;
            }
            else if (Nickname == "" || Nickname == null) {
                alert("請輸入名字");
                return false;
            }
            */
            @*檢查生日*@

            //if (Birthday == "" || Birthday == null) {
            //    //alert("請選擇生日");
            //    //return false;
            //}
            //else if (!Birthday.match(/^\d{4}\/\d{2}\/\d{2}$/)) {
            //    alert("生日格式錯誤");
            //    return false;
            //}
            //if (Birthday != "") {
            //    var today = new Date();
            //    if (parseInt(Birthday.substring(0, 4), 10) > today.getFullYear()) {
            //        alert("尚未出生,年份錯誤");
            //        return false;
            //    } else {
            //        if (parseInt(Birthday.substring(0, 4), 10) == today.getFullYear() && parseInt(Birthday.substring(5, 7), 10) > today.getMonth() + 1) {
            //            alert("尚未出生,月份錯誤");
            //            return false;
            //        } else {
            //            if (parseInt(Birthday.substring(0, 4), 10) == today.getFullYear() && parseInt(Birthday.substring(5, 7), 10) == today.getMonth() + 1 && parseInt(Birthday.substring(8, 10), 10) > today.getDate()) {
            //                alert("尚未出生,日期錯誤");
            //                return false;
            //            }
            //        }
            //    }
            //}

            @*檢查手機格式*@
            //if (Phone == "" || Phone == null) {
            //    alert("請填寫手機");
            //    return false;
            //}
            //else if (!Phone.match(/^09[0-9]{8}$/)) {
            //    alert("手機格式錯誤");
            //    return false;
            //}
            @*檢查是否勾選*@
            //if (account_agreepaper != 1) {
            //    alert("請勾選\"我已閱讀完畢，並同意會員條款(需勾選才能加入會員)\"");
            //    return false;
            //}
            if ($("#googlecaptchaM").val() == null || $("#googlecaptchaM").val().length == 0) {
                alert("驗證碼錯誤");
                return false;
            }
            else {
                return true;
            }
        }

        @*送出*@
        $("#submitdata").bind("click", function () {
            var CheckResult = CheckAllStatus();
            if (CheckResult == false) {
                return false;
            }
            else if (CheckResult == true) {  //存檔寫入資料庫
                Save();
                return false;
            }
        });

        function Save() {
            var ModelDetail = {
                "Email": $("#account_email").val(),
                "PWD": $("#account_pwd").val(),
                "confirmPWD": $("#account_confirmpassword").val(),
                "Sex": $("#Sex").val(),
                "Lastname": $("#RegisterLastName").val(),
                "Firstname": $("#Nickname").val(),
                "Birthday": $("#Birthday").val(),
                "Mobile": $("#Mobile").val(),
                "AgreePaper": 1,
                "MessagePaper": 1
            }
            var json = JSON.stringify({ "SaveAccountVM": ModelDetail });
            $.ajax({
                url: "/MyAccount/Signup",
                contentType: "application/json;charset=utf-8",
                data: json,
                method: 'POST',
                dataType: "Json",
                success: function (res) {
                    switch (res) {
                        case "0":
                            alert("您已正式成為新蛋全球生活網的會員，誠摯歡迎您的加入");
                            location.href = "/";
                            break;
                        case "1":
                            alert("系統錯誤，請洽服務人員");
                            break;
                        case "Email已存在\n":
                            $("#EmailRulesCheck").text("此帳號已存在");
                            $("#EmailRulesCheck").css('display', '');
                            break;
                        case "帳號格式錯誤\n":
                            $("#EmailRulesCheck").text("帳號格式錯誤，請重新輸入");
                            $("#EmailRulesCheck").css('display', '');
                            break;
                        case "確認密碼與密碼不符\n":
                            $("#PassWordRuleSay").css('display', '');
                            break;
                        case "密碼有誤\n":
                            $("#password_rules").text("密碼格式錯誤");
                            $("#password_rules").css('display', '');
                            break;
                        case "未同意會員條款\n":
                            alert("請勾選\"我已閱讀完畢，並同意會員條款(需勾選才能加入會員)\"");
                            break;
                        case "日期輸入錯誤\n":
                            $("#BirthDayRule").text("生日格式錯誤");
                            $("#BirthDayRule").css('display', '');
                            break;
                        case "資料錯誤\n":
                            alert("資料錯誤，請檢查後再送出");
                            break;
                        default:
                            location.href = "/";
                            break;
                    }
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    alert(xhr.status);
                    alert(thrownError);
                }
            });
        }
        var verifyCallback = function (reponse) {
            $("#googlecaptchaM").val(reponse);
        };

    </script>
}