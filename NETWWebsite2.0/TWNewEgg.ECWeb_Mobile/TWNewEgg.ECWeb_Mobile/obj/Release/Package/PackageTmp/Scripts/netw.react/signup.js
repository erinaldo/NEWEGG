!function(e){function a(s){if(t[s])return t[s].exports;var n=t[s]={exports:{},id:s,loaded:!1};return e[s].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}var t={};return a.m=e,a.c=t,a.p="",a(0)}({0:function(e,a,t){e.exports=t(121)},121:function(e,a,t){"use strict";var s=t(122),n=function(){ReactDOM.render(React.createElement(s,null),document.getElementById("content"))};window.nemReact.reacts.signup={init:n}},122:function(e,a){"use strict";var t=nemReact.require("NetwTools"),s=nemReact.require("SignupAction"),n=nemReact.require("SignupStore"),r={email:"email",password:"password",passwordAgain:"passwordAgain",phonenumber:"phonenumber",lastName:"lastName",firstName:"firstName",txtDate:"txtDate",gender:"gender"},i=React.createClass({displayName:"SignupContent",checkEmail:function(e){var a=this.state.errorMessage,s=!1;return t.matchEmail(e)?(delete a[r.email],s=!0):a[r.email]="",this.setState({signupEmail:e,errorMessage:a}),s},checkPassword:function(e){var a=this.state.errorMessage,t=!1;return e?(delete a[r.password],t=!0):a[r.password]="",this.setState({signupPassword:e,errorMessage:a}),t},checkPasswordAgain:function(e){var a=this.state.errorMessage,t=!1;return e!=this.state.signupPassword?a[r.passwordAgain]="":(delete a[r.passwordAgain],t=!0),this.setState({signupPasswordAgain:e,errorMessage:a}),t},handleSignupInput:function(e){var a=e.target.name,t=e.target.value;switch(a){case r.email:this.checkEmail(t);break;case r.password:this.checkPassword(t);break;case r.passwordAgain:this.checkPasswordAgain(t)}},checkAndSubmit:function(e){e.preventDefault();var a=this.checkEmail(this.state.signupEmail),t=this.checkPassword(this.state.signupPassword),s=this.checkPasswordAgain(this.state.signupPasswordAgain),n=!!this.state.googleReCaptcha;a&&t&&s&&n&&this.signupNow()},signupNow:function(){var e="",a={Email:this.state.signupEmail,PWD:this.state.signupPassword,confirmPWD:this.state.signupPasswordAgain,ACTName:e,AgreePaper:1,MessagePaper:1},t=JSON.stringify({SaveAccountVM:a,activity:e});s.signup(t)},showError:function(e){for(var a="",t=Object.keys(this.state.errorMessage),s=0;s<t.length;s++)e==t[s]&&(a="errMsg");return a},initGreCaptcha:function(e,a,t,s){grecaptcha.render(e,{sitekey:"6LdBUgATAAAAAMLJw020y8KArh95QbmWer4P_q7k",callback:a,theme:t,type:s})},verifyCallback:function(e){this.setState({googleReCaptcha:e})},isPassword:function(){var e="password";return this.state.showPassword&&(e="text"),e},showPassword:function(e){this.setState({showPassword:!this.state.showPassword})},getInitialState:function(){return{signupEmail:"",signupPassword:"",showPassword:!1,signupPasswordAgain:"",googleReCaptcha:"",errorMessage:{}}},componentWillMount:function(){n.addChangeListener(this._onChange)},componentDidMount:function(){var e=this.verifyCallback,a=this.initGreCaptcha;$(window).load(function(){a("googlecaptcha",e,"light","image")})},componentWillUnmount:function(){n.removeChangeListener(this._onChange)},render:function(){return React.createElement("div",{className:"signup"},React.createElement("div",{className:"title"},React.createElement("h3",null,"歡迎加入新蛋會員")),React.createElement("div",{className:"signupPage"},React.createElement("ul",{className:"signupContent"},React.createElement("li",null,React.createElement("p",{className:"signupInfo "+this.showError(r.email)},React.createElement("input",{type:"email",name:r.email,placeholder:"請輸入e-mail(新蛋帳號)",defaultValue:this.state.signupEmail,onChange:this.handleSignupInput})),React.createElement("p",{className:"signupInfo "+this.showError(r.password)},React.createElement("input",{type:this.isPassword(),name:r.password,placeholder:"請輸入密碼",defaultValue:this.state.signupPassword,onChange:this.handleSignupInput}),React.createElement("input",{type:"button",value:"顯示密碼",className:"showPassword",onClick:this.showPassword})),React.createElement("p",{className:"signupInfo "+this.showError(r.passwordAgain)},React.createElement("input",{type:"password",name:r.passwordAgain,placeholder:"再次輸入密碼",defaultValue:this.state.signupPasswordAgain,onChange:this.handleSignupInput})),React.createElement("div",{className:"signupInfo googlecaptcha"},React.createElement("div",{className:"captchaContent",id:"googlecaptcha"})),React.createElement("a",{className:"signupBtn",href:"",onClick:this.checkAndSubmit},"加入會員"),React.createElement("p",{className:"provision"},"我同意接受",React.createElement("a",{href:""},"新蛋服務條款"),"和",React.createElement("a",{href:""},"隱私權政策"))))))},_onChange:function(){var e=this.state.errorMessage,a=n.getResponse();switch(a){case"0":alert("您已正式成為新蛋全球生活網的會員，誠摯歡迎您的加入"),ga("send","pageview","/myaccount/signupcomplete"),location.href="/";break;case"1":alert("系統錯誤，請洽服務人員");break;case"Email已存在\n":alert("Email已存在"),e[r.email]="";break;case"帳號格式錯誤\n":alert("帳號格式錯誤"),e[r.password]="";break;case"確認密碼與密碼不符\n":alert("確認密碼與密碼不符"),e[r.password]="",e[r.passwordAgain]="";break;case"密碼有誤\n":alert("密碼有誤"),e[r.password]="";break;case"資料錯誤\n":alert("資料錯誤，請檢查後再送出");break;default:location.href="/"}this.setState({signupPassword:"",signupPasswordAgain:"",errorMessage:e})}});e.exports=i}});